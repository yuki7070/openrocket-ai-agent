---
name: write-report
description: 全結果を統合した実験レポートを作成する
agent: optimizer
---

# write-report: 実験レポート作成

## いつ使うか

- `verify-candidates` で検証が完了した後
- 最適化ワークフローの**最終ステップ**

## 入力

実験ディレクトリ内の全成果物:
- `baseline.md` — ベースライン性能
- `problem.py` — 問題定義
- `doe_plan.md` — DOE計画
- `doe_results.md` — DOE実行結果
- `surrogate_report.md` — サロゲート品質
- `results.md` — top3候補
- `verification.md` — 検証結果
- 画像ファイル（`pareto_front.png`, `doe_summary.png`, `candidate_comparison.png`）

## 手順

以下の構成で `report.md` を作成する。

## レポートテンプレート

```markdown
# 最適化実験レポート

- **実験名**: <YYYY-MM-DD>-<説明>
- **対象ファイル**: simple.ork
- **実行日**: YYYY-MM-DD

## 1. 目的

<ユーザーの最適化目標を記述>

## 2. ベースライン

<baseline.md の内容を要約>

| メトリクス | ベースライン値 |
|---|---|
| 最高高度 | xxx m |
| ... | ... |

## 3. 問題定義

### 設計変数

| 変数名 | 範囲 | 単位 |
|---|---|---|
| ... | ... | ... |

### 目的関数

| 名前 | データタイプ | 抽出方法 | 方向 |
|---|---|---|---|
| ... | ... | ... | ... |

### 制約

| 名前 | 条件 | 閾値 |
|---|---|---|
| ... | ... | ... |

## 4. DOE結果

- サンプル数: N
- feasible率: X%

<doe_summary.png を参照>

## 5. サロゲートモデル品質

<surrogate_report.md の内容>

| 目的関数 | LOO R^2 | 品質 |
|---|---|---|
| ... | ... | ... |

## 6. 最適化結果

- パレート解数: N

<pareto_front.png を参照>

### Top-3候補

<results.md の表を転記>

<candidate_comparison.png を参照>

## 7. 検証結果

<verification.md の内容>

### サロゲート予測 vs 実測

<誤差表を転記>

## 8. 推奨設計

<最も優れた候補を推奨し、理由を記述>

### ベースラインとの比較

| メトリクス | ベースライン | 推奨設計 | 改善率 |
|---|---|---|---|
| ... | ... | ... | ... |

## 9. 今後の検討事項

<さらなる改善の余地や注意点を記述>
```

## 出力

実験ディレクトリに `report.md` として保存。

## 判断ゲート

- 全セクションのデータが揃っていることを確認
- 画像ファイルの参照パスが正しいことを確認
- ベースラインとの改善率が計算されていることを確認

## 注意事項

- レポートは Markdown 形式で、画像は相対パスで参照
- 数値は適切な有効数字（小数点以下2-4桁）
- ユーザーが後から読み返せるよう、判断の根拠を明記する
- `problem.py` が実験ディレクトリにあるため、再現実行が可能
